{"version":3,"sources":["img/send.svg","panels/Message.js","services/axios.js","panels/Chat.js","panels/Home.js","panels/LoadingPanel.js","App.js","index.js"],"names":["module","exports","__webpack_require__","p","Message","_ref","myId","_ref$data","data","sender_id","id","text","reciever_id","unixtime","react_default","a","createElement","style","display","width","className","marginLeft","backgroundColor","color","axios","url","fetch","method","headers","Accept","Content-Type","body","JSON","stringify","Object","objectSpread","sign","window","location","search","slice","then","response","status","json","Error","timeout","Chat","state","messages","writeng","sendButton","React","createRef","updateMessages","userId","_this","props","send","resp","setState","onClick","e","success","scrollTo","document","scrollHeight","this","setTimeout","setInterval","clearTimeout","_this2","_this$state","_this$props","back","pavId","es6","centered","length","left","PanelHeaderBack_default","paddingBottom","map","message","panels_Message","key","Fragment","distextAlign","bottom","textAlign","position","right","vertical","padding","placeItems","top","zIndex","ref","flex","background","autocomplete","type","name","placeholder","value","onChange","currentTarget","src","Send","height","align","Component","Home","chats","updateChats","openChat","_this$props2","chat","i","expandable","user_id","LoadingPanel","App","history","activePanel","go","toConsumableArray","push","connect","console","log","pop","schemeAttribute","createAttribute","attributes","setNamedItem","setTheme","_this$state2","isWebView","onSwipeBack","panels_LoadingPanel","panels_Home","panels_Chat","ReactDOM","render","src_App","getElementById"],"mappings":"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","file":"static/js/main.fa775caa.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/send.5d4960d5.svg\";","import React from \"react\";\r\n\r\nconst Message = ({\r\n\tmyId,\r\n\tdata: { id, sender_id, reciever_id, unixtime, text }\r\n}) => (\r\n\t<div style={{ display: \"flex\", width: \"100%\" }}>\r\n\t\t<div\r\n\t\t\tclassName=\"Message\"\r\n\t\t\tstyle={\r\n\t\t\t\tsender_id === myId\r\n\t\t\t\t\t? {\r\n\t\t\t\t\t\t\tmarginLeft: \"auto\",\r\n\t\t\t\t\t\t\tbackgroundColor: \"#cfe6ff\",\r\n\t\t\t\t\t\t\tcolor: \"black\"\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t: null\r\n\t\t\t}\r\n\t\t>\r\n\t\t\t{text}\r\n\t\t</div>\r\n\t</div>\r\n);\r\n\r\nexport default Message;\r\n","class axios {\r\n\tstatic send(url, data) {\r\n\t\treturn fetch(\"https://ipagar.ddns.net:8082\" + url, {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\theaders: {\r\n\t\t\t\tAccept: \"application/json\",\r\n\t\t\t\t\"Content-Type\": \"application/json\"\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\t...data,\r\n\t\t\t\tsign: window.location.search.slice(1)\r\n\t\t\t})\r\n\t\t}).then(response => {\r\n\t\t\tif (response.status === 200) return response.json();\r\n\t\t\telse throw new Error(response.status);\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport default axios;\r\n","import React from \"react\";\r\nimport { Panel, PanelHeader, Div, FixedLayout } from \"@vkontakte/vkui\";\r\nimport PanelHeaderBack from \"@vkontakte/vkui/dist/components/PanelHeaderBack/PanelHeaderBack\";\r\nimport Send from \"../img/send.svg\";\r\nimport Message from \"./Message\";\r\nimport axios from \"../services/axios\";\r\n\r\nlet timeout = null;\r\n\r\nclass Chat extends React.Component {\r\n\tstate = {\r\n\t\tmessages: [],\r\n\t\twriteng: \"\"\r\n\t};\r\n\tsendButton = React.createRef();\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.updateMessages().then(() => {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\twindow.scrollTo(0, document.body.scrollHeight);\r\n\t\t\t}, 1000);\r\n\t\t});\r\n\r\n\t\ttimeout = setInterval(this.updateMessages, 1000);\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tclearTimeout(timeout);\r\n\t}\r\n\r\n\tupdateMessages = () => {\r\n\t\tconst { userId } = this.props;\r\n\r\n\t\treturn axios.send(\"/messages\", { reciever_id: userId }).then(resp => {\r\n\t\t\tthis.setState({ messages: resp });\r\n\t\t});\r\n\t};\r\n\r\n\tonClick = e => {\r\n\t\tconst { writeng } = this.state;\r\n\t\tconst { userId } = this.props;\r\n\r\n\t\taxios\r\n\t\t\t.send(\"/message\", {\r\n\t\t\t\treciever_id: userId,\r\n\t\t\t\ttext: writeng\r\n\t\t\t})\r\n\t\t\t.then(success => {\r\n\t\t\t\tthis.updateMessages().then(() => {\r\n\t\t\t\t\twindow.scrollTo(0, document.body.scrollHeight);\r\n\t\t\t\t\tthis.setState({ writeng: \"\" });\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { writeng, messages } = this.state;\r\n\t\tconst { myId, back, pavId } = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<Panel id=\"chat\" centered={messages.length > 0 ? false : true}>\r\n\t\t\t\t<PanelHeader\r\n\t\t\t\t\tleft={\r\n\t\t\t\t\t\tmyId === pavId ? (\r\n\t\t\t\t\t\t\t<PanelHeaderBack\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tback();\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t) : null\r\n\t\t\t\t\t}\r\n\t\t\t\t>\r\n\t\t\t\t\tВ чатике\r\n\t\t\t\t</PanelHeader>\r\n\t\t\t\t{messages.length > 0 ? (\r\n\t\t\t\t\t<div style={{ paddingBottom: 60 }}>\r\n\t\t\t\t\t\t{messages.map(message => (\r\n\t\t\t\t\t\t\t<Message\r\n\t\t\t\t\t\t\t\tkey={message.id}\r\n\t\t\t\t\t\t\t\tdata={message}\r\n\t\t\t\t\t\t\t\tmyId={myId}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t<Div\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tdistextAlign: \"center\",\r\n\t\t\t\t\t\t\t\tbottom: 0,\r\n\t\t\t\t\t\t\t\ttextAlign: \"center\"\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<h1>\r\n\t\t\t\t\t\t\t\t<b>Это анонимно</b>\r\n\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\tПавел не узнает, кто является его собеседником.\r\n\t\t\t\t\t\t</Div>\r\n\t\t\t\t\t\t<Div\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tposition: \"absolute\",\r\n\t\t\t\t\t\t\t\tbottom: 0,\r\n\t\t\t\t\t\t\t\tleft: 0,\r\n\t\t\t\t\t\t\t\tright: 0\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t)}\r\n\t\t\t\t<FixedLayout vertical=\"bottom\">\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tpadding: 5,\r\n\t\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\t\tplaceItems: \"center\"\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tid=\"background\"\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tposition: \"absolute\",\r\n\t\t\t\t\t\t\t\ttop: 0,\r\n\t\t\t\t\t\t\t\tleft: 0,\r\n\t\t\t\t\t\t\t\tright: 0,\r\n\t\t\t\t\t\t\t\tbottom: 0,\r\n\t\t\t\t\t\t\t\tbackgroundColor: \"#f5f5f5\",\r\n\t\t\t\t\t\t\t\tzIndex: -1\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tref={this.sendButton}\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tflex: 1,\r\n\t\t\t\t\t\t\t\tbackground: \"var(--background_light)\"\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tautocomplete=\"off\"\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tname=\"writeng\"\r\n\t\t\t\t\t\t\tplaceholder=\"Сообщение...\"\r\n\t\t\t\t\t\t\tvalue={writeng}\r\n\t\t\t\t\t\t\tonChange={e => {\r\n\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\twriteng: e.currentTarget.value\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\tonClick={this.onClick}\r\n\t\t\t\t\t\t\tsrc={Send}\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\theight: \"44px\",\r\n\t\t\t\t\t\t\t\talign: \"center\"\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</FixedLayout>\r\n\t\t\t</Panel>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Chat;\r\n","import React from \"react\";\r\nimport { Panel, PanelHeader, Div, Button, Cell, List } from \"@vkontakte/vkui\";\r\nimport axios from \"../services/axios\";\r\n\r\nlet timeout = null;\r\n\r\nclass Home extends React.Component {\r\n\tstate = { chats: [] };\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst { myId, pavId, openChat } = this.props;\r\n\r\n\t\tthis.updateChats();\r\n\t\ttimeout = setInterval(this.updateChats, 10000);\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tclearTimeout(timeout);\r\n\t}\r\n\r\n\tupdateChats = () => {\r\n\t\taxios.send(\"/chats\").then(resp => {\r\n\t\t\tthis.setState({ chats: resp });\r\n\t\t});\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { chats } = this.state;\r\n\t\tconst { myId, pavId } = this.props;\r\n\t\tconst { openChat } = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<Panel id=\"home\" centered={myId === pavId ? false : true}>\r\n\t\t\t\t<PanelHeader>\r\n\t\t\t\t\t{myId === pavId ? \"Чатики\" : \"Здравствуйте!\"}\r\n\t\t\t\t</PanelHeader>\r\n\r\n\t\t\t\t{chats.length > 0 ? (\r\n\t\t\t\t\t<List>\r\n\t\t\t\t\t\t{chats.map((chat, i) => (\r\n\t\t\t\t\t\t\t<Cell\r\n\t\t\t\t\t\t\t\texpandable\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\topenChat(chat.user_id);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tСобеседник #{i + 1}\r\n\t\t\t\t\t\t\t</Cell>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</List>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Div style={{ textAlign: \"center\" }}>\r\n\t\t\t\t\t\tПока никто не написал :(\r\n\t\t\t\t\t</Div>\r\n\t\t\t\t)}\r\n\t\t\t</Panel>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Home;\r\n","import React from \"react\";\r\nimport { Panel, PanelHeader, PanelSpinner } from \"@vkontakte/vkui\";\r\n\r\nclass LoadingPanel extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Panel id=\"loadingPanel\" centered>\r\n\t\t\t\t<PanelHeader>Загрузочка...</PanelHeader>\r\n\t\t\t\t<PanelSpinner />\r\n\t\t\t</Panel>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default LoadingPanel;\r\n","import React from \"react\";\nimport connect from \"@vkontakte/vkui-connect-promise\";\nimport { View, ConfigProvider } from \"@vkontakte/vkui\";\nimport \"@vkontakte/vkui/dist/vkui.css\";\nimport \"./app.css\";\nimport Chat from \"./panels/Chat\";\nimport Home from \"./panels/Home\";\nimport LoadingPanel from \"./panels/LoadingPanel\";\n\nclass App extends React.Component {\n\tstate = {\n\t\thistory: [],\n\t\tactivePanel: \"loadingPanel\",\n\t\tuserId: null,\n\t\tmyId: null,\n\t\tpavId: 67602787\n\t};\n\n\tsetTheme() {\n\t\tlet schemeAttribute = document.createAttribute(\"scheme\");\n\t\tschemeAttribute.value = \"bright_light\";\n\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { myId, pavId, openChat } = this.state;\n\n\t\tthis.setTheme();\n\t\tconnect.send(\"VKWebAppGetUserInfo\", {}).then(success => {\n\t\t\tthis.setState({ myId: success.data.id });\n\t\t\tif (success.data.id === pavId) {\n\t\t\t\tthis.go(\"home\");\n\t\t\t} else {\n\t\t\t\tthis.openChat(pavId);\n\t\t\t}\n\t\t});\n\t}\n\n\topenChat = user_id => {\n\t\tthis.setState({ userId: user_id });\n\t\tthis.go(\"chat\");\n\t};\n\n\tgo = activePanel => {\n\t\tconst history = [...this.state.history];\n\t\thistory.push(activePanel);\n\t\tif (this.state.activePanel === \"home\") {\n\t\t\tconnect.send(\"VKWebAppEnableSwipeBack\");\n\t\t}\n\t\tthis.setState({ history, activePanel });\n\t};\n\n\tback = () => {\n\t\tconsole.log(this.state.history);\n\t\tconst history = [...this.state.history];\n\t\thistory.pop();\n\t\tconst activePanel = history[history.length - 1];\n\t\tif (activePanel === \"home\") {\n\t\t\tconnect.send(\"VKWebAppDisableSwipeBack\");\n\t\t}\n\t\tthis.setState({ history, activePanel });\n\t};\n\n\trender() {\n\t\tconst { myId, pavId, userId } = this.state;\n\t\treturn (\n\t\t\t<ConfigProvider isWebView={true}>\n\t\t\t\t<View\n\t\t\t\t\tonSwipeBack={this.back}\n\t\t\t\t\thistory={this.state.history}\n\t\t\t\t\tactivePanel={this.state.activePanel}\n\t\t\t\t>\n\t\t\t\t\t<LoadingPanel id=\"loadingPanel\" />\n\t\t\t\t\t<Home\n\t\t\t\t\t\tid=\"home\"\n\t\t\t\t\t\tmyId={myId}\n\t\t\t\t\t\tpavId={pavId}\n\t\t\t\t\t\topenChat={this.openChat}\n\t\t\t\t\t/>\n\t\t\t\t\t<Chat\n\t\t\t\t\t\tid=\"chat\"\n\t\t\t\t\t\tmyId={myId}\n\t\t\t\t\t\tpavId={pavId}\n\t\t\t\t\t\tback={this.back}\n\t\t\t\t\t\tuserId={userId}\n\t\t\t\t\t/>\n\t\t\t\t</View>\n\t\t\t</ConfigProvider>\n\t\t);\n\t}\n}\n\nexport default App;\n","import \"core-js/features/map\";\nimport \"core-js/features/set\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport connect from \"@vkontakte/vkui-connect-promise\";\nimport App from \"./App\";\n\nconnect.send(\"VKWebAppInit\", {});\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}